{"version":3,"file":"index-DTz62XVc.js","sources":["../../src/js/main.js"],"sourcesContent":["import \"../index.css\";\r\n\r\nconsole.log(\"Script cargado correctamente\");\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n    console.log(\"DOM completamente cargado y parseado\");\r\n\r\n    //  Definir todas las variables ANTES de usarlas\r\n    const input = document.querySelector('.js-search');\r\n    const btnSearch = document.querySelector('.js-btn-search');\r\n    const btnReset = document.querySelector('.js-btn-reset');\r\n    const btnEliminateFav = document.querySelector('.js-eliminar-fav');\r\n    const listResult = document.querySelector('.js-container-result');\r\n    const listFav = document.querySelector('.js-container-selected-fav');\r\n\r\n    //  Imprimir las variables despu茅s de inicializarlas\r\n    console.log(\"Elementos en el DOM:\");\r\n    console.log(\"Input:\", input);\r\n    console.log(\"Bot贸n de b煤squeda:\", btnSearch);\r\n    console.log(\"Bot贸n de reset:\", btnReset);\r\n    console.log(\"Bot贸n eliminar favoritos:\", btnEliminateFav);\r\n    console.log(\"Contenedor de resultados:\", listResult);\r\n    console.log(\"Contenedor de favoritos:\", listFav);\r\n\r\n    console.log(document.querySelector('.js-search'));\r\n    console.log(document.querySelector('.js-btn-search'));\r\n    console.log(document.querySelector('.js-btn-reset'));\r\n    console.log(document.querySelector('.js-eliminar-fav'));\r\n    console.log(document.querySelector('.js-container-result'));\r\n    console.log(document.querySelector('.js-container-selected-fav'));\r\n\r\n\r\n    //  Verificar si alg煤n elemento no se encontr贸\r\n    if (!input || !btnSearch || !btnReset || !btnEliminateFav || !listResult || !listFav) {\r\n        console.error(\"Uno o m谩s elementos del DOM no se encontraron. Verifica los nombres de clase en index.html.\");\r\n        return; //  DETENER el c贸digo si hay error\r\n    }\r\n\r\n    \r\n\r\n    let url = 'https://api.jikan.moe/v4/anime?q=';\r\n    let search = url;\r\n    let animeList = [];\r\n    let favAnime = [];\r\n\r\n    btnEliminateFav.addEventListener('click', () => {\r\n        favAnime = [];\r\n        listFav.innerHTML = '';\r\n        localStorage.setItem('favAnimeServer', JSON.stringify(favAnime));\r\n    });\r\n\r\n    btnReset.addEventListener('click', () => {\r\n        input.value = '';\r\n        listFav.innerHTML = '';\r\n        listResult.innerHTML = '';\r\n    });\r\n    \r\n    console.log(\"Todos los elementos fueron encontrados correctamente.\");\r\n\r\n    btnSearch.addEventListener('click', (ev) => {\r\n        ev.preventDefault();\r\n        const searchInput = input.value.toLowerCase();\r\n        fetch(url + searchInput)\r\n            .then(resp => resp.json())\r\n            .then((info) => {\r\n                animeList = info.data;\r\n                listResult.innerHTML = animeList.map(anime => \r\n                    `<div>\r\n                        <img class=\"js-anime\" src=\"${anime.images.jpg.image_url}\" alt=\"${anime.title}\" id=\"${anime.mal_id}\" />\r\n                        <p>${anime.title}</p>\r\n                    </div>`\r\n                ).join('');\r\n                addFavListeners();\r\n            });\r\n    });\r\n\r\n    function addFavListeners() {\r\n        document.querySelectorAll('.js-anime').forEach(img => {\r\n            img.addEventListener('click', (ev) => {\r\n                const id = parseInt(ev.target.id);\r\n                const anime = animeList.find(anime => anime.mal_id === id);\r\n                if (!favAnime.some(f => f.mal_id === id)) {\r\n                    favAnime.push(anime);\r\n                    renderFavList();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    function renderFavList() {\r\n        listFav.innerHTML = favAnime.map(fav => \r\n            `<div>\r\n                <img src=\"${fav.images.jpg.image_url}\" alt=\"${fav.title}\" />\r\n                <p>${fav.title}</p>\r\n                <button class=\"remove-fav\" data-id=\"${fav.mal_id}\">X</button>\r\n            </div>`\r\n        ).join('');\r\n\r\n        document.querySelectorAll('.remove-fav').forEach(btn => {\r\n            btn.addEventListener('click', (ev) => {\r\n                const id = parseInt(ev.target.dataset.id);\r\n                favAnime = favAnime.filter(anime => anime.mal_id !== id);\r\n                renderFavList();\r\n            });\r\n        });\r\n\r\n        localStorage.setItem('favAnimeServer', JSON.stringify(favAnime));\r\n    }\r\n\r\n    const savedFavs = localStorage.getItem('favAnimeServer');\r\n    if (savedFavs) {\r\n        favAnime = JSON.parse(savedFavs);\r\n        renderFavList();\r\n    }\r\n});\r\n"],"names":["input","btnSearch","btnReset","btnEliminateFav","listResult","listFav","url","animeList","favAnime","ev","searchInput","resp","info","anime","addFavListeners","img","id","f","renderFavList","fav","btn","savedFavs"],"mappings":"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"}